<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GSB 544: Data Science and Machine Learning with Python - 5&nbsp; Tabular Data and Basic Data Operations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-pivoting_joining.html" rel="next">
<link href="./02-plotnine.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./00-setup.html">Data Science with Python</a></li><li class="breadcrumb-item"><a href="./03-basic_data_operations.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tabular Data and Basic Data Operations</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">GSB 544: Data Science and Machine Learning with Python</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/DS-ML-with-python/Course-Textbook/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Data Science with Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro and Workflow Setup</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Programming Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-a-intro_ai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Gen AI</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-plotnine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Visualization in Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-basic_data_operations.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tabular Data and Basic Data Operations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-pivoting_joining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pivoting and Joining</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-function_writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Writing Custom Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Iteration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Webscraping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Strings and Regular Expressions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Machine Learning with Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-modeling_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Introduction to Predictive Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-multiple_linear_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multiple Linear Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-model_validation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Model Validation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-cross_validation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Pipelines, Cross-Validation, and Tuning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-penalized_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Penalized Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-nonparametric_methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Nonparametric Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-classification_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Introduction to Classification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-linear_classifiers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Linear Classifiers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-multiclass.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Multiclass Classification</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">5.1</span> Introduction</a></li>
  <li><a href="#reading-tabular-data-into-python" id="toc-reading-tabular-data-into-python" class="nav-link" data-scroll-target="#reading-tabular-data-into-python"><span class="header-section-number">5.2</span> Reading Tabular Data into Python</a>
  <ul class="collapse">
  <li><a href="#tidy-data-is-special-tabular-data" id="toc-tidy-data-is-special-tabular-data" class="nav-link" data-scroll-target="#tidy-data-is-special-tabular-data"><span class="header-section-number">5.2.1</span> Tidy Data is Special Tabular Data</a></li>
  </ul></li>
  <li><a href="#the-big-five-verbs-of-data-wrangling" id="toc-the-big-five-verbs-of-data-wrangling" class="nav-link" data-scroll-target="#the-big-five-verbs-of-data-wrangling"><span class="header-section-number">5.3</span> The “Big Five” Verbs of Data Wrangling</a>
  <ul class="collapse">
  <li><a href="#select-columnsvariables" id="toc-select-columnsvariables" class="nav-link" data-scroll-target="#select-columnsvariables"><span class="header-section-number">5.3.1</span> <strong>Select</strong> Columns/Variables</a></li>
  <li><a href="#filter-rowsobservations" id="toc-filter-rowsobservations" class="nav-link" data-scroll-target="#filter-rowsobservations"><span class="header-section-number">5.3.2</span> <strong>Filter</strong> Rows/Observations</a></li>
  <li><a href="#arrange-rows" id="toc-arrange-rows" class="nav-link" data-scroll-target="#arrange-rows"><span class="header-section-number">5.3.3</span> <strong>Arrange</strong> Rows</a></li>
  <li><a href="#mutate-columns" id="toc-mutate-columns" class="nav-link" data-scroll-target="#mutate-columns"><span class="header-section-number">5.3.4</span> <strong>Mutate</strong> Column(s)</a></li>
  <li><a href="#summarizing-rows" id="toc-summarizing-rows" class="nav-link" data-scroll-target="#summarizing-rows"><span class="header-section-number">5.3.5</span> <strong>Summarizing</strong> Rows</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/DS-ML-with-python/Course-Textbook/edit/main/03-basic_data_operations.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./00-setup.html">Data Science with Python</a></li><li class="breadcrumb-item"><a href="./03-basic_data_operations.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tabular Data and Basic Data Operations</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tabular Data and Basic Data Operations</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">5.1</span> Introduction</h2>
<p>This document demonstrates the use of the <code>pandas</code> library in Python to do basic data wrangling and summarization.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you do not have the <code>pandas</code> library installed then you will need to run</p>
<p><code>pip install pandas</code></p>
<p>in the Jupyter terminal to install. <strong>Remember:</strong> you only need to install once per machine (or Colab session, for packages that don’t come pre-installed).</p>
</div>
</div>
</section>
<section id="reading-tabular-data-into-python" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="reading-tabular-data-into-python"><span class="header-section-number">5.2</span> Reading Tabular Data into Python</h2>
<p>We’re going to be exploring <code>pandas</code> in the context of the famous Titanic dataset. We’ll work with a subset of this dataset, but more information about it all can be found <a href="https://www.kaggle.com/competitions/titanic/data">here</a>.</p>
<p>We start by loading the <code>numpy</code> and <code>pandas</code> libraries. Most of our data wrangling work will happen with functions from the <code>pandas</code> library, but the <code>numpy</code> library will be useful for performing certain mathematical operations should we choose to transform any of our data.</p>
<div id="492d518b" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a746d14b" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data_dir <span class="op">=</span> <span class="st">"https://dlsun.github.io/pods/data/"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df_titanic <span class="op">=</span> pd.read_csv(data_dir <span class="op">+</span> <span class="st">"titanic.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-example no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<p>We’ve already seen <code>read_csv()</code> used many times for importing CSV files into Python, but it bears repeating.</p>
</div>
</div>
<p>Data files of many different types and shapes can be read into Python with similar functions, but we will focus on tabular data.</p>
<section id="tidy-data-is-special-tabular-data" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="tidy-data-is-special-tabular-data"><span class="header-section-number">5.2.1</span> Tidy Data is Special Tabular Data</h3>
<p>For most people, the image that comes to mind when thinking about data is indeed something tabular or spreadsheet-like in nature. <strong>Which is great!</strong></p>
<p>Tabular data is a form preferred by MANY different data operations and work. However, we will want to take this one step further. In almost all data science work we want our data to be <strong>tidy</strong></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>A dataset is <strong>tidy</strong> if it adheres to following three characteristics:</p>
<ul>
<li><p>Every column is a variable</p></li>
<li><p>Every row is an observation</p></li>
<li><p>Every cell is a single value</p></li>
</ul>
</div>
</div>
<p><img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-check-in no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check In
</div>
</div>
<div class="callout-body-container callout-body">
<p>With 2-3 people around you, navigate to the <a href="https://www.gapminder.org/data/">GapMinder Data</a> site and download a single CSV file of your choice. Open it up in Excel or your application of choice. Is this dataset <em>tidy</em>? If not, then what would have to change to make it <em>tidy</em>?</p>
</div>
</div>
<div class="callout callout-style-default callout-learn-more no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learn More
</div>
</div>
<div class="callout-body-container callout-body">
<p>The term “tidy data” was first popularized in <a href="https://vita.had.co.nz/papers/tidy-data.pdf">this paper</a> by R developer Hadley Wickham.</p>
</div>
</div>
<p>You may have noticed that <code>plotnine</code> (<code>ggplot</code>) is basically built to take <em>tidy</em> data. Variables are specified in the aesthetics function to map them (i.e.&nbsp;columns) in our dataset to plot elements. This type of behavior is <strong>EXTREMELY</strong> common among functions that work with data in all languages, and so the importance of getting our data into a <em>tidy</em> format cannot be overstated.</p>
<p>In Python, there are at least two quick ways to view a dataset we’ve read in:</p>
<div id="e17fbde9" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df_titanic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Abbing, Mr. Anthony</td>
<td>male</td>
<td>42.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>5547.0</td>
<td>7.11</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Abbott, Mr. Eugene Joseph</td>
<td>male</td>
<td>13.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>2673.0</td>
<td>20.05</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Abbott, Mr. Rossmore Edward</td>
<td>male</td>
<td>16.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>2673.0</td>
<td>20.05</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Abbott, Mrs. Rhoda Mary 'Rosa'</td>
<td>female</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2673.0</td>
<td>20.05</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Abelseth, Miss. Karen Marie</td>
<td>female</td>
<td>16.0</td>
<td>3rd</td>
<td>S</td>
<td>Norway</td>
<td>348125.0</td>
<td>7.13</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2202</td>
<td>Wynn, Mr. Walter</td>
<td>male</td>
<td>41.0</td>
<td>deck crew</td>
<td>B</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2203</td>
<td>Yearsley, Mr. Harry</td>
<td>male</td>
<td>40.0</td>
<td>victualling crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2204</td>
<td>Young, Mr. Francis James</td>
<td>male</td>
<td>32.0</td>
<td>engineering crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2205</td>
<td>Zanetti, Sig. Minio</td>
<td>male</td>
<td>20.0</td>
<td>restaurant staff</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2206</td>
<td>Zarracchi, Sig. L.</td>
<td>male</td>
<td>26.0</td>
<td>restaurant staff</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>2207 rows × 9 columns</p>
</div>
</div>
</div>
<div id="5ee59421" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_titanic.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Abbing, Mr. Anthony</td>
<td>male</td>
<td>42.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>5547.0</td>
<td>7.11</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Abbott, Mr. Eugene Joseph</td>
<td>male</td>
<td>13.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>2673.0</td>
<td>20.05</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Abbott, Mr. Rossmore Edward</td>
<td>male</td>
<td>16.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>2673.0</td>
<td>20.05</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Abbott, Mrs. Rhoda Mary 'Rosa'</td>
<td>female</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2673.0</td>
<td>20.05</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Abelseth, Miss. Karen Marie</td>
<td>female</td>
<td>16.0</td>
<td>3rd</td>
<td>S</td>
<td>Norway</td>
<td>348125.0</td>
<td>7.13</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The latter (<code>.head()</code>) is usually preferred in case the dataset is large.</p>
<div class="callout callout-style-default callout-check-in no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check In
</div>
</div>
<div class="callout-body-container callout-body">
<p>Does the titanic dataset appear to be in <em>tidy</em> format?</p>
</div>
</div>
</section>
</section>
<section id="the-big-five-verbs-of-data-wrangling" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="the-big-five-verbs-of-data-wrangling"><span class="header-section-number">5.3</span> The “Big Five” Verbs of Data Wrangling</h2>
<p>Data wrangling can involve a lot of different steps and operations to get data into a <em>tidy</em> format and ready for analysis and visualization. The vast majority of these fall under the umbrella one the following five operations:</p>
<ol type="1">
<li><p><strong>Select</strong> columns/variables of interest</p></li>
<li><p><strong>Filter</strong> rows/observations of interest</p></li>
<li><p><strong>Arrange</strong> the rows of a dataset by column(s) of interest (i.e.&nbsp;order or sort)</p></li>
<li><p><strong>Mutate</strong> the columns of a dataset (i.e.&nbsp;create or transform variables)</p></li>
<li><p><strong>Summarize</strong> the rows of a dataset for column(s) of interest</p></li>
</ol>
<section id="select-columnsvariables" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="select-columnsvariables"><span class="header-section-number">5.3.1</span> <strong>Select</strong> Columns/Variables</h3>
<p>Suppose we want to select the <code>age</code> variable from the titanic <code>DataFrame</code>. There are three ways to do this.</p>
<ol type="1">
<li>Use <code>.loc</code>, specifying both the rows and columns. (The colon <code>:</code> is Python shorthand for “all”.)</li>
</ol>
<div id="1218902b" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_titanic.loc[:, <span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Access the column as you would a key in a <code>dict</code>.</li>
</ol>
<div id="6463c525" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Access the column as an attribute of the <code>DataFrame</code>.</li>
</ol>
<div id="05a663cb" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df_titanic.age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Method 3 (attribute access) is the most concise. However, it does not work if the variable name contains spaces or special characters, begins with a number, or matches an existing attribute of the <code>DataFrame</code>. So, methods 1 and 2 are usually safer and preferred.</p>
<p>To select multiple columns, you would pass in a <em>list</em> of variable names, instead of a single variable name. For example, to select both <code>age</code> and <code>fare</code>, either of the two methods below would work (and produce the same result):</p>
<div id="362fbf33" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method 1</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df_titanic.loc[:, [<span class="st">"age"</span>, <span class="st">"fare"</span>]].head()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Method 2</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>df_titanic[[<span class="st">"age"</span>, <span class="st">"fare"</span>]].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="filter-rowsobservations" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="filter-rowsobservations"><span class="header-section-number">5.3.2</span> <strong>Filter</strong> Rows/Observations</h3>
<section id="selecting-rowsobservations-by-location" class="level4" data-number="5.3.2.1">
<h4 data-number="5.3.2.1" class="anchored" data-anchor-id="selecting-rowsobservations-by-location"><span class="header-section-number">5.3.2.1</span> Selecting Rows/Observations by Location</h4>
<p>Before we see how to <strong>filter</strong> (i.e.&nbsp;<strong>subset</strong>) the rows of dataset based on some condition, let’s see how to select rows by explicitly identifying them.</p>
<p>We can select a row by its position using the <code>.iloc</code> attribute. Keeping in mind that the first row is actually row 0, the fourth row could be extracted as:</p>
<div id="707d50e7" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df_titanic.iloc[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>name        Abbott, Mrs. Rhoda Mary 'Rosa'
gender                              female
age                                   39.0
class                                  3rd
embarked                                 S
country                            England
ticketno                            2673.0
fare                                 20.05
survived                                 1
Name: 3, dtype: object</code></pre>
</div>
</div>
<p>Notice that a single row from a <code>DataFrame</code> is no longer a <code>DataFrame</code> but a different data structure, called a <code>Series</code>.</p>
<p>We can also select multiple rows by passing a <em>list</em> of positions to <code>.iloc</code>.</p>
<div id="4e179778" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df_titanic.iloc[[<span class="dv">1</span>, <span class="dv">3</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Abbott, Mr. Eugene Joseph</td>
<td>male</td>
<td>13.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>2673.0</td>
<td>20.05</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Abbott, Mrs. Rhoda Mary 'Rosa'</td>
<td>female</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2673.0</td>
<td>20.05</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Notice that when we select multiple rows, we get a <code>DataFrame</code> back.</p>
<p>So a <code>Series</code> is used to store a single observation (across multiple variables), while a <code>DataFrame</code> is used to store multiple observations (across multiple variables).</p>
<p>If selecting consecutive rows, we can use Python’s <code>slice</code> notation. For example, the code below selects all rows from the fourth row, up to (but not including) the tenth row.</p>
<div id="2433d83d" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df_titanic.iloc[<span class="dv">3</span>:<span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Abbott, Mrs. Rhoda Mary 'Rosa'</td>
<td>female</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2673.0</td>
<td>20.0500</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Abelseth, Miss. Karen Marie</td>
<td>female</td>
<td>16.0</td>
<td>3rd</td>
<td>S</td>
<td>Norway</td>
<td>348125.0</td>
<td>7.1300</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Abelseth, Mr. Olaus Jørgensen</td>
<td>male</td>
<td>25.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>348122.0</td>
<td>7.1300</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Abelson, Mr. Samuel</td>
<td>male</td>
<td>30.0</td>
<td>2nd</td>
<td>C</td>
<td>France</td>
<td>3381.0</td>
<td>24.0000</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>Abelson, Mrs. Hannah</td>
<td>female</td>
<td>28.0</td>
<td>2nd</td>
<td>C</td>
<td>France</td>
<td>3381.0</td>
<td>24.0000</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>Abī-Al-Munà, Mr. Nāsīf Qāsim</td>
<td>male</td>
<td>27.0</td>
<td>3rd</td>
<td>C</td>
<td>Lebanon</td>
<td>2699.0</td>
<td>18.1509</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="selecting-rowsobservations-by-condition" class="level4" data-number="5.3.2.2">
<h4 data-number="5.3.2.2" class="anchored" data-anchor-id="selecting-rowsobservations-by-condition"><span class="header-section-number">5.3.2.2</span> Selecting Rows/Observations by Condition</h4>
<p>We’ll often want to <strong>filter</strong> or <strong>subset</strong> the rows of a dataset based on some condition. To do this we’ll take advantage of <strong>vectorization</strong> and <strong>boolean masking</strong>.</p>
<p>Recall that we can compare the values of a variable/column to a particular value in the following way, and observe the result.</p>
<div id="755f55f3" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"age"</span>] <span class="op">&gt;</span> <span class="dv">30</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>0        True
1       False
2       False
3        True
4       False
        ...  
2202     True
2203     True
2204     True
2205    False
2206    False
Name: age, Length: 2207, dtype: bool</code></pre>
</div>
</div>
<p>We can use these <code>True</code> and <code>False</code> values to filter/subset the dataset! The following subsets the titanic dataset down to only those individuals (rows) with ages over 30.</p>
<div id="ac079fe1" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df_titanic[df_titanic[<span class="st">"age"</span>] <span class="op">&gt;</span> <span class="dv">30</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Abbing, Mr. Anthony</td>
<td>male</td>
<td>42.0</td>
<td>3rd</td>
<td>S</td>
<td>United States</td>
<td>5547.0</td>
<td>7.1100</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Abbott, Mrs. Rhoda Mary 'Rosa'</td>
<td>female</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2673.0</td>
<td>20.0500</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Ahlin, Mrs. Johanna Persdotter</td>
<td>female</td>
<td>40.0</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>7546.0</td>
<td>9.0906</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Aldworth, Mr. Augustus Henry</td>
<td>male</td>
<td>35.0</td>
<td>2nd</td>
<td>S</td>
<td>England</td>
<td>248744.0</td>
<td>13.0000</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>Allen, Mr. William Henry</td>
<td>male</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>373450.0</td>
<td>8.0100</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2197</td>
<td>Worthman, Mr. William Henry</td>
<td>male</td>
<td>37.0</td>
<td>engineering crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2200</td>
<td>Wright, Mr. William</td>
<td>male</td>
<td>40.0</td>
<td>victualling crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2202</td>
<td>Wynn, Mr. Walter</td>
<td>male</td>
<td>41.0</td>
<td>deck crew</td>
<td>B</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2203</td>
<td>Yearsley, Mr. Harry</td>
<td>male</td>
<td>40.0</td>
<td>victualling crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2204</td>
<td>Young, Mr. Francis James</td>
<td>male</td>
<td>32.0</td>
<td>engineering crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>984 rows × 9 columns</p>
</div>
</div>
</div>
<p>We can combine multiple conditions using <code>&amp;</code> (and) and <code>|</code> (or). The following subsets the titanic dataset down to females over 30 years of age.</p>
<div id="765fcd2c" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df_titanic[(df_titanic[<span class="st">"age"</span>] <span class="op">&gt;</span> <span class="dv">30</span>) <span class="op">&amp;</span> (df_titanic[<span class="st">"gender"</span>] <span class="op">==</span> <span class="st">"female"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Abbott, Mrs. Rhoda Mary 'Rosa'</td>
<td>female</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2673.0</td>
<td>20.0500</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>Ahlin, Mrs. Johanna Persdotter</td>
<td>female</td>
<td>40.0</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>7546.0</td>
<td>9.0906</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35</td>
<td>Andersson, Miss. Ida Augusta Margareta</td>
<td>female</td>
<td>38.0</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>347091.0</td>
<td>7.1506</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">40</td>
<td>Andersson, Mrs. Alfrida Konstantia Brogren</td>
<td>female</td>
<td>39.0</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>347082.0</td>
<td>31.0506</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">44</td>
<td>Andrews, Miss. Kornelia Theodosia</td>
<td>female</td>
<td>62.0</td>
<td>1st</td>
<td>C</td>
<td>United States</td>
<td>13502.0</td>
<td>77.1902</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1997</td>
<td>Robinson, Mrs. Annie</td>
<td>female</td>
<td>41.0</td>
<td>victualling crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2059</td>
<td>Smith, Miss. Katherine Elizabeth</td>
<td>female</td>
<td>45.0</td>
<td>victualling crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2076</td>
<td>Stap, Miss. Sarah Agnes</td>
<td>female</td>
<td>47.0</td>
<td>victualling crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2143</td>
<td>Wallis, Mrs. Catherine Jane</td>
<td>female</td>
<td>36.0</td>
<td>victualling crew</td>
<td>S</td>
<td>England</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2145</td>
<td>Walsh, Miss. Catherine</td>
<td>female</td>
<td>32.0</td>
<td>victualling crew</td>
<td>S</td>
<td>Ireland</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>206 rows × 9 columns</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-check-in no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check In
</div>
</div>
<div class="callout-body-container callout-body">
<p>With the 2-3 people around you, how would you find the just the names of the males under 20 years of age who survived (in the titanic dataset) with a single line of code?</p>
</div>
</div>
</section>
</section>
<section id="arrange-rows" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="arrange-rows"><span class="header-section-number">5.3.3</span> <strong>Arrange</strong> Rows</h3>
<p>As part of exploratory data analysis and some reporting efforts, we will want to sort a dataset or set of results by one or more variables of interest.</p>
<p>We can do this with <code>.sort_values</code> in either <em>ascending</em> or <em>descending</em> order.</p>
<p>The following sorts the titanic dataset by <code>age</code> in decreasing order.</p>
<div id="a5eb7566" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df_titanic.sort_values(by <span class="op">=</span> [<span class="st">"age"</span>], ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1176</td>
<td>Svensson, Mr. Johan</td>
<td>male</td>
<td>74.000000</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>347060.0</td>
<td>7.1506</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">820</td>
<td>Mitchell, Mr. Henry Michael</td>
<td>male</td>
<td>72.000000</td>
<td>2nd</td>
<td>S</td>
<td>England</td>
<td>24580.0</td>
<td>10.1000</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">53</td>
<td>Artagaveytia, Mr. Ramon</td>
<td>male</td>
<td>71.000000</td>
<td>1st</td>
<td>C</td>
<td>Argentina</td>
<td>17609.0</td>
<td>49.1001</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">456</td>
<td>Goldschmidt, Mr. George B.</td>
<td>male</td>
<td>71.000000</td>
<td>1st</td>
<td>C</td>
<td>United States</td>
<td>17754.0</td>
<td>34.1301</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">282</td>
<td>Crosby, Captain. Edward Gifford</td>
<td>male</td>
<td>70.000000</td>
<td>1st</td>
<td>S</td>
<td>United States</td>
<td>5735.0</td>
<td>71.0000</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1182</td>
<td>Tannūs, Master. As'ad</td>
<td>male</td>
<td>0.416667</td>
<td>3rd</td>
<td>C</td>
<td>Lebanon</td>
<td>2625.0</td>
<td>8.1004</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">296</td>
<td>Danbom, Master. Gilbert Sigvard Emanuel</td>
<td>male</td>
<td>0.333333</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>347080.0</td>
<td>14.0800</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">316</td>
<td>Dean, Miss. Elizabeth Gladys 'Millvina'</td>
<td>female</td>
<td>0.166667</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2315.0</td>
<td>20.1106</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">439</td>
<td>Gheorgheff, Mr. Stanio</td>
<td>male</td>
<td>NaN</td>
<td>3rd</td>
<td>C</td>
<td>Bulgaria</td>
<td>349254.0</td>
<td>7.1711</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">677</td>
<td>Kraeff, Mr. Theodor</td>
<td>male</td>
<td>NaN</td>
<td>3rd</td>
<td>C</td>
<td>Bulgaria</td>
<td>349253.0</td>
<td>7.1711</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>2207 rows × 9 columns</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that in these last few sections, we have not made any <em>permanent</em> changes to the <code>df_titanic</code> object. We have only asked python do some selecting/filtering/sorting and then to print out the results, not save them.</p>
<p>If we wanted <code>df_titanic</code> to become permanently sorted by age, we would <strong>re-assign</strong> the object:</p>
<div id="64c09bdb" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_titanic <span class="op">=</span> df_titanic.sort_values(by <span class="op">=</span> [<span class="st">"age"</span>], ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will sometimes see object reassignment happen in a different way, using an <code>inplace = True</code> argument, like this:</p>
<div id="5accbb10" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df_titanic.sort_values(by <span class="op">=</span> [<span class="st">"age"</span>], ascending<span class="op">=</span><span class="va">False</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We strongly recommend <strong>against</strong> this approach, for two reason:</p>
<ol type="1">
<li><p>When an object is “overwritten” via reassignment, that’s a major decision; you lose the old version of the object. It should be made deliberately and obviously. The <code>inplace</code> argument is easy to miss when copying/editing code, so it can lead to accidental overwriting that is hard to keep track of.</p></li>
<li><p>Not all functions of DataFrames have an <code>inplace</code> option. It can be frustrating to get into the habit of using it, only to find out the hard way that it’s not available half the time!</p></li>
</ol>
</div>
</div>
</section>
<section id="mutate-columns" class="level3" data-number="5.3.4">
<h3 data-number="5.3.4" class="anchored" data-anchor-id="mutate-columns"><span class="header-section-number">5.3.4</span> <strong>Mutate</strong> Column(s)</h3>
<p>The variables available to us in our original dataset contain all of the information we have access to, but the best insights may instead come from transformations of those variables.</p>
<section id="transforming-quantitative-variables" class="level4" data-number="5.3.4.1">
<h4 data-number="5.3.4.1" class="anchored" data-anchor-id="transforming-quantitative-variables"><span class="header-section-number">5.3.4.1</span> Transforming Quantitative Variables</h4>
<p>One of the simplest reasons to want to transform a quantitative variable is to change the measurement units.</p>
<p>Here we change the <code>age</code> of passengers from a value in years to a value in decades.</p>
<div id="68f9fd16" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"age"</span>] <span class="op">=</span> df_titanic[<span class="st">"age"</span>] <span class="op">/</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we have a quantitative variable that is particularly skewed, then it might be a good idea to transform the values of that variable…like taking the <code>log</code> of the values.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This was a strategy you saw employed with the GapMinder data!</p>
</div>
</div>
<p>Below is an example of taking the <code>log</code> of the <code>fare</code> variable. Notice that we’re making use of the <code>numpy</code> here to take the <code>log</code>.</p>
<div id="48833b1c" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"fare"</span>] <span class="op">=</span> np.log(df_titanic[<span class="st">"fare"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remember that we can take advantage of <strong>vectorization</strong> here too. The following operation wouldn’t really make physical sense, but it’s an example of <strong>creating a new variable</strong> out of existing variables.</p>
<div id="81b1e805" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"nonsense"</span>] <span class="op">=</span> df_titanic[<span class="st">"fare"</span>] <span class="op">/</span> df_titanic[<span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that we created the new variable, <code>nonsense</code>, by specifying on the left side of the <code>=</code> here and populating that column/variable via the expression on the right side of the <code>=</code>.</p>
<p>We could want to create a new variable by categorizing (or discretizing) the values of a quantitative variable (i.e.&nbsp;convert a quantitative variable to a categorical variable). We can do so with <code>cut</code>.</p>
<p>In the following, we create a new <code>age_cat</code> variable which represents whether a person is a child or an adult.</p>
<div id="6b8832a1" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"age_cat"</span>] <span class="op">=</span> pd.cut(df_titanic[<span class="st">"age"</span>],</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                              bins <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">18</span>, <span class="dv">100</span>],</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                              labels <span class="op">=</span> [<span class="st">"child"</span>, <span class="st">"adult"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-check-in no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check In
</div>
</div>
<div class="callout-body-container callout-body">
<p>Consider the four mutations we just performed. In which ones did we <strong>reassign</strong> a column of the dataset, thus <em>replacing</em> the old values with new ones? In which ones did we <strong>create</strong> a brand-new column, thus retaining the old column(s) that were involved in the calculation?</p>
</div>
</div>
</section>
<section id="transforming-categorical-variables" class="level4" data-number="5.3.4.2">
<h4 data-number="5.3.4.2" class="anchored" data-anchor-id="transforming-categorical-variables"><span class="header-section-number">5.3.4.2</span> Transforming Categorical Variables</h4>
<p>In some situations, especially later with modeling, we’ll need to convert categorical variables (stored as text) into quantitative (often coded) variables. Binary categorical variables can be converted into quantitative variables by coding one category as 1 and the other category as 0. (In fact, the <strong>survived</strong> column in the titanic dataset has already been coded this way.) The easiest way to do this is to create a boolean mask. For example, to convert <code>gender</code> to a quantitative variable <code>female</code>, which is 1 if the passenger was female and 0 otherwise, we can do the following:</p>
<div id="5826606c" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"female"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">*</span> (df_titanic[<span class="st">"gender"</span>] <span class="op">==</span> <span class="st">"female"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What do we do about a categorical variable with more than twwo categories, like <code>embarked</code>, which has four categories? In general, a categorical variable with <strong>K</strong> categories can be converted into <strong>K</strong> separate 0/1 variables, or <strong>dummy variables</strong>. Each of the <strong>K</strong> dummy variables is an indicator for one of the <strong>K</strong> categories. That is, a dummy variable is 1 if the observation fell into its particular category and 0 otherwise.</p>
<p>Although it is not difficult to create dummy variables manually, the easiest way to create them is the <code>get_dummies()</code> function in <code>pandas</code>.</p>
<div id="722fc6d8" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>pd.get_dummies(df_titanic[<span class="st">"embarked"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">B</th>
<th data-quarto-table-cell-role="th">C</th>
<th data-quarto-table-cell-role="th">Q</th>
<th data-quarto-table-cell-role="th">S</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1176</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">820</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">53</td>
<td>False</td>
<td>True</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">456</td>
<td>False</td>
<td>True</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">282</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1182</td>
<td>False</td>
<td>True</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">296</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">316</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">439</td>
<td>False</td>
<td>True</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">677</td>
<td>False</td>
<td>True</td>
<td>False</td>
<td>False</td>
</tr>
</tbody>
</table>

<p>2207 rows × 4 columns</p>
</div>
</div>
</div>
<p>We may also want to change the levels of a categorical variable. A categorical variable can be transformed by mapping its levels to new levels. For example, we may only be interested in whether a person on the titanic was a passenger or a crew member. The variable <code>class</code> is too detailed. We can create a new variable, <code>type</code>, that is derived from the existing variable <code>class</code>. Observations with a <code>class</code> of “1st”, “2nd”, or “3rd” get a value of “passenger”, while observations with a <code>class</code> of “victualling crew”, “engineering crew”, or “deck crew” get a value of “crew”.</p>
<div id="5693eb48" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"type"</span>] <span class="op">=</span> df_titanic[<span class="st">"class"</span>].<span class="bu">map</span>({</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1st"</span>: <span class="st">"passenger"</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2nd"</span>: <span class="st">"passenger"</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3rd"</span>: <span class="st">"passenger"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"victualling crew"</span>: <span class="st">"crew"</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"engineering crew"</span>: <span class="st">"crew"</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"deck crew"</span>: <span class="st">"crew"</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>df_titanic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">class</th>
<th data-quarto-table-cell-role="th">embarked</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
<th data-quarto-table-cell-role="th">nonsense</th>
<th data-quarto-table-cell-role="th">age_cat</th>
<th data-quarto-table-cell-role="th">female</th>
<th data-quarto-table-cell-role="th">type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1176</td>
<td>Svensson, Mr. Johan</td>
<td>male</td>
<td>7.400000</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>347060.0</td>
<td>1.967196</td>
<td>0</td>
<td>0.265837</td>
<td>child</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">820</td>
<td>Mitchell, Mr. Henry Michael</td>
<td>male</td>
<td>7.200000</td>
<td>2nd</td>
<td>S</td>
<td>England</td>
<td>24580.0</td>
<td>2.312535</td>
<td>0</td>
<td>0.321185</td>
<td>child</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">53</td>
<td>Artagaveytia, Mr. Ramon</td>
<td>male</td>
<td>7.100000</td>
<td>1st</td>
<td>C</td>
<td>Argentina</td>
<td>17609.0</td>
<td>3.893861</td>
<td>0</td>
<td>0.548431</td>
<td>child</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">456</td>
<td>Goldschmidt, Mr. George B.</td>
<td>male</td>
<td>7.100000</td>
<td>1st</td>
<td>C</td>
<td>United States</td>
<td>17754.0</td>
<td>3.530180</td>
<td>0</td>
<td>0.497208</td>
<td>child</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">282</td>
<td>Crosby, Captain. Edward Gifford</td>
<td>male</td>
<td>7.000000</td>
<td>1st</td>
<td>S</td>
<td>United States</td>
<td>5735.0</td>
<td>4.262680</td>
<td>0</td>
<td>0.608954</td>
<td>child</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1182</td>
<td>Tannūs, Master. As'ad</td>
<td>male</td>
<td>0.041667</td>
<td>3rd</td>
<td>C</td>
<td>Lebanon</td>
<td>2625.0</td>
<td>2.091913</td>
<td>1</td>
<td>50.205923</td>
<td>child</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">296</td>
<td>Danbom, Master. Gilbert Sigvard Emanuel</td>
<td>male</td>
<td>0.033333</td>
<td>3rd</td>
<td>S</td>
<td>Sweden</td>
<td>347080.0</td>
<td>2.644755</td>
<td>0</td>
<td>79.342661</td>
<td>child</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">316</td>
<td>Dean, Miss. Elizabeth Gladys 'Millvina'</td>
<td>female</td>
<td>0.016667</td>
<td>3rd</td>
<td>S</td>
<td>England</td>
<td>2315.0</td>
<td>3.001247</td>
<td>1</td>
<td>180.074822</td>
<td>child</td>
<td>1</td>
<td>passenger</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">439</td>
<td>Gheorgheff, Mr. Stanio</td>
<td>male</td>
<td>NaN</td>
<td>3rd</td>
<td>C</td>
<td>Bulgaria</td>
<td>349254.0</td>
<td>1.970059</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>passenger</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">677</td>
<td>Kraeff, Mr. Theodor</td>
<td>male</td>
<td>NaN</td>
<td>3rd</td>
<td>C</td>
<td>Bulgaria</td>
<td>349253.0</td>
<td>1.970059</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>passenger</td>
</tr>
</tbody>
</table>

<p>2207 rows × 13 columns</p>
</div>
</div>
</div>
</section>
</section>
<section id="summarizing-rows" class="level3" data-number="5.3.5">
<h3 data-number="5.3.5" class="anchored" data-anchor-id="summarizing-rows"><span class="header-section-number">5.3.5</span> <strong>Summarizing</strong> Rows</h3>
<p>Summarization of the rows of a dataset for column(s) of interest can take many different forms. This introduction will not be exhaustive, but certainly cover the basics.</p>
<section id="summarizing-a-quantitative-variable" class="level4" data-number="5.3.5.1">
<h4 data-number="5.3.5.1" class="anchored" data-anchor-id="summarizing-a-quantitative-variable"><span class="header-section-number">5.3.5.1</span> Summarizing a Quantitative Variable</h4>
<p>There are a few descriptive statistics that can be computed directly including, but not limited to, the mean and median.</p>
<div id="3c7c5df3" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"age"</span>].mean()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"age"</span>].median()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>df_titanic[[<span class="st">"age"</span>, <span class="st">"fare"</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>age     3.043673
fare    2.918311
dtype: float64</code></pre>
</div>
</div>
<p>We can ask for a slightly more comprehensive description using <code>.describe()</code></p>
<div id="3fb3e423" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"age"</span>].describe()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>df_titanic.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">ticketno</th>
<th data-quarto-table-cell-role="th">fare</th>
<th data-quarto-table-cell-role="th">survived</th>
<th data-quarto-table-cell-role="th">nonsense</th>
<th data-quarto-table-cell-role="th">female</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>2205.000000</td>
<td>1.316000e+03</td>
<td>1291.000000</td>
<td>2207.000000</td>
<td>1289.000000</td>
<td>2207.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>3.043673</td>
<td>2.842157e+05</td>
<td>2.918311</td>
<td>0.322157</td>
<td>2.147877</td>
<td>0.221568</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>1.215968</td>
<td>6.334726e+05</td>
<td>0.974452</td>
<td>0.467409</td>
<td>7.237694</td>
<td>0.415396</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>0.016667</td>
<td>2.000000e+00</td>
<td>1.108728</td>
<td>0.000000</td>
<td>0.265837</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>2.200000</td>
<td>1.426225e+04</td>
<td>1.971383</td>
<td>0.000000</td>
<td>0.742371</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>2.900000</td>
<td>1.114265e+05</td>
<td>2.645480</td>
<td>0.000000</td>
<td>0.936833</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>3.800000</td>
<td>3.470770e+05</td>
<td>3.435945</td>
<td>1.000000</td>
<td>1.260935</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>7.400000</td>
<td>3.101317e+06</td>
<td>6.238443</td>
<td>1.000000</td>
<td>180.074822</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Note that, by default, <code>.describe()</code> provides descriptive statistics for only the quantitative variables in the dataset.</p>
<p>We can enhance numerical summaries with <code>.groupby()</code>, which allows us to specify one or more variables that we’d like to <strong>group</strong> our work by.</p>
<div id="49294eac" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df_titanic[[<span class="st">"age"</span>, <span class="st">"survived"</span>]].groupby(<span class="st">"survived"</span>).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">survived</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>3.083194</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2.960631</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-check-in no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check In
</div>
</div>
<div class="callout-body-container callout-body">
<p>With 2-3 people around you, look up how you would compute the correlation between two quantitative variables in Python. Compute the correlation between the <code>age</code> and <code>fare</code> variables in the titanic dataset.</p>
</div>
</div>
</section>
<section id="summarizing-a-categorical-variable" class="level4" data-number="5.3.5.2">
<h4 data-number="5.3.5.2" class="anchored" data-anchor-id="summarizing-a-categorical-variable"><span class="header-section-number">5.3.5.2</span> Summarizing a Categorical Variable</h4>
<p>When it comes to categorical variables we’re most often interested in <strong>frequency distributions</strong> (counts), <strong>relative frequency distributions</strong>, and <strong>cross-tabulations</strong>.</p>
<div id="cccca388" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"class"</span>].unique()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"class"</span>].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>count     2207
unique       7
top        3rd
freq       709
Name: class, dtype: object</code></pre>
</div>
</div>
<p>The <code>.unique()</code> here allows us to see the unique values of the <code>class</code> variable. Notice that the results of <code>.describe()</code> on a categorical variable are much different.</p>
<p>To completely summarize a single categorical variable, we report the number of times each level appeared, or its <strong>frequency</strong>.</p>
<div id="c226ef41" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"class"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>class
3rd                 709
victualling crew    431
1st                 324
engineering crew    324
2nd                 284
restaurant staff     69
deck crew            66
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>Instead of reporting counts, we can also report proportions or probabilities, or the <strong>relative frequencies</strong>. We can calculate the relative frequencies by specifying <code>normalize=True</code> in <code>.value_counts()</code>.</p>
<div id="122e0ab0" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df_titanic[<span class="st">"class"</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>class
3rd                 0.321251
victualling crew    0.195288
1st                 0.146806
engineering crew    0.146806
2nd                 0.128681
restaurant staff    0.031264
deck crew           0.029905
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<p>Cross-tabulations are one way we can investigate possible relationships between categorical variables. For example, what can we say about the relationship between <code>gender</code> and <code>survival</code> on the Titanic?</p>
<div class="callout callout-style-default callout-check-in no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check In
</div>
</div>
<div class="callout-body-container callout-body">
<p>Summarize <code>gender</code> and <code>survival</code> individually by computing the frequency distributions of each.</p>
</div>
</div>
<p>This does not tell us how <code>gender</code> interacts with <code>survival</code>. To do that, we need to produce a <em>cross-tabulation</em>, or a “cross-tab” for short. (Statisticians tend to call this a <em>contingency table</em> or a <em>two-way table</em>.)</p>
<div id="6274d989" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>pd.crosstab(df_titanic[<span class="st">"survived"</span>], df_titanic[<span class="st">"gender"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">female</th>
<th data-quarto-table-cell-role="th">male</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">survived</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>130</td>
<td>1366</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>359</td>
<td>352</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>A cross-tabulation of two categorical variables is a two-dimensional array, with the levels of one variable along the rows and the levels of the other variable along the columns. Each cell in this array contains the number of observations that had a particular combination of levels. So in the Titanic data set, there were 359 females who survived and 1366 males who died. From the cross-tabulation, we can see that there were more females who survived than not, while there were more males who died than not. Clearly, gender had a strong influence on survival because of the Titanic’s policy of “women and children first”.</p>
<p>To get probabilities instead of counts, we specify <code>normalize=True</code>.</p>
<div id="0252958e" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>pd.crosstab(df_titanic[<span class="st">"survived"</span>], df_titanic[<span class="st">"gender"</span>], normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">female</th>
<th data-quarto-table-cell-role="th">male</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">survived</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.058903</td>
<td>0.618940</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0.162664</td>
<td>0.159493</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-check-in no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Check In
</div>
</div>
<div class="callout-body-container callout-body">
<p>What about conditional proportions? With 2-3 people around you, discuss how you would compute <em>the proportion of females that survived</em> and <em>the proportion of males that survived</em> and then do it.</p>
<p>Note, there are multiple ways to do this.</p>
</div>
</div>
<div class="callout callout-style-default callout-practice-exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Practice Activity
</div>
</div>
<div class="callout-body-container callout-body">
<p>Open up <a href="https://colab.research.google.com/drive/1JnbwwQG7GW6cu_kGNggo0U8SLFTvTLfR?usp=sharing">this colab notebook</a> and make a copy.</p>
<p>Fill out the sections where indicated, render it to html with Quarto, and push your final notebook and html document to a repository on GitHub (same one as Practice Activity 1.1 is good). Then share this repository link in the quiz question.</p>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/DS-ML-with-python\.github\.io\/Course-Textbook\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-plotnine.html" class="pagination-link" aria-label="Data Visualization in Python">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Visualization in Python</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-pivoting_joining.html" class="pagination-link" aria-label="Pivoting and Joining">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pivoting and Joining</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/DS-ML-with-python/Course-Textbook/edit/main/03-basic_data_operations.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>